<div ng-app='app.ldpathApp' ng-controller='LdpathCtrl'>
  <form>
    <div class="form-group">
      <label for="url">URL</label>
      <%= text_field_tag "url", params[:url], :'ng-init' => "ldpath.url = '#{escape_once(params[:url])}'", class: "form-control", :'ng-model' => 'ldpath.url', :'ng-model-options' => "{ updateOn: 'blur' }" %>
    </div>

    <div class="form-group">
      <label for="program">Program</label>
      <div ui-ace="{
        mode: 'ldpath',
        onLoad: aceLoaded,
        require: ['ace/ext/language_tools'],
        advanced: {
          enableSnippets: true,
          enableBasicAutocompletion: true,
          enableLiveAutocompletion: true
        }
      }" ng-model="ldpath.program" ng-model-options="{  updateOn: 'default blur', debounce: 1000 }"></div>
    </div>
  </form>
  
  <hr />
  
  <h1>{{ldpath.url}}</h1>
  <div hljs language="json" source="response.content"></div>
</div>